<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script>
        // 이 라인에서는 아직 실행부가 버튼에 도달하지 못했으므로, 문서가 모두 로드된 시점에 이벤트를 연결해야 한다.
        addEventListener("load", function(){    // 콜백함수
            // 이 시점부터 문서가 모두 로드되었기 때문에, 원하는 요소에 접근 가능.
            document.querySelector('#bt_send').addEventListener("click", function(){
                // 폼을 서버로 전송한다.
                document.form1.submit();
            });
        });
    </script>
</head>
<body>
    <pre>
    서버로 파일을 전송하는 업로드를 java 로 직접 구현 할 경우, 개발자가 네크워크 통신, IO(입출력), 파일 등을 직접 제어해야 한다.
    생산성이 너무 떨어지므로, 실무에선 이러한 것들이 이미 구현된 라이브러리를 가져다 쓴다.
    업로드 라이브러리는 무료도 있고 유료도 있는데, 무료중에서는
    Apache 에서 제작한 FileUpload 컴포넌트나
    Orelliy 에서 제작한 Cos.jar 컴포넌트 등이 있다.
    </pre>

    <div>
        <pre>
        서버로 일반 텍스트가 아닌 이미지나 동영상과 같이 인간이 해석할 수 없는 파일을 바이너리 파일이라 한다.
        이러한 바이너리 파일들은 반드시 POST 방식으로 전송해야 하며, 특히 인코딩 타입도 multipart/form-data 라는 형식을 지정해야 한다.
        이 때 multipart 이 서버로 전송하고자 하는 미디어 타입은 텍스트 뿐만 아니라, 바이너리도 섞여 있는 복합유형을 의미한다.
        </pre>
        <form name="form1" method="post" enctype="multipart/form-data" action="/upload"> <!--이미지 업로드를 처리할 서블릿 매핑-->
            <div>
                <input type="text" placeholder="사진 제목을 입력하세요." name="title"> 
            </div>
            
            <div>
                이미지를 선택하세요<input type="file" name="photo"> 
                <!--파일 컴포넌트에 이름을 부여하지 않으면, 서버 측에서 파라미터가 없다고 간주하여 업로드 수행이 불가능하다.-->
            </div>

            <div>
                <button type="button" id="bt_send">서버로 업로드</button>
            </div>
        </form>
    </div>
    
</body>
</html>